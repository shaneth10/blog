# 异步：现在与将来

## 分块的程序

可以把 JavaScript 程序写在单个 .js 文件中，但是这个程序几乎一定是由多个块构成的。这些块中只有一个是现在执行，其余的则会在将来执行。最常见的块单位是函数。  
```
var data = ajax( "http://some.url.1" )

console.log( data )
// date 通常不会包含 Ajax 结果
```
标准的 Ajax 请求不是同步完成的，这意味着 ajax(..) 函数还没有返回任何值可以赋给变量 data。如果 ajax(..) 能够阻塞到响应返回，那么 data = .. 赋值就会正常工作。  
其实，最简单的方法是使用一个回调函数。

## 事件循环

程序通常分成了很多小块，在事件循环队列中一个接一个地执行。严格地说，和你的程序不直接相关的其他事件也会插入到队列中。

## 并行线程

异步是关于现在和将来的时间间隙，而并行是关于能够同时发生的事情。  
并行计算最常见的工具就是进程和线程。进程和线程独立运行，并可能同时运行。

## 并发

- 非交互
- 交互
- 协作

## 任务

## 语句顺序

以上几个模块由于为经常接触的编程思路及思想，这边就一笔带过不细讲了。

# 回调

到目前为止，回调是编写和处理 JavaScript 程序异步逻辑的最常用方式。确实，回调是这门语言中最基础的异步模式。回调函数是 JavaScript 的异步主力军，并且它们不辱使命地完成了自己的任务。

## continuation

回调函数包裹或者说封装了程序的延续。

## 顺序的大脑

### 执行与计划

### 嵌套回调与链式回调
```
listen('click', function handler(evt) {
  setTimeout(function request() {
    ajax(....)
  })
})
```
以上三个函数进行嵌套构成的链，其中每个函数异步序列中的一个步骤。  
这种代码常常被称为回调函数，有时也被称为毁灭金字塔，得名于嵌套缩进产生的横向三角形状。

## 信任问题

## 省点回调

# Promise