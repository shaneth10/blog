# VNode

## 什么是 VNode

在 Vue.js 中存在一个 VNode 类，使用它可以实例化不同类型的 vnode 实例，而不同类型的 vnode 实例各自表示不同类型的 DOM 元素。

简单地说， vnode 可以理解成节点描述对象，它描述了应该怎样去创建真实的 DOM 节点。

vnode 表示一个真实的 DOM 元素，所有真实的 DOM 节点都使用 vnode 创建并插入到页面中。渲染视图的过程是先创建 vnode，然后再使用 vnode去生成真实的 DOM 元素，最后插入到页面渲染视图。

## VNode 的作用

Vue.js 目前对状态的侦测策略采用了中等粒度。当状态发生改变时，只通知到组件级别，然后组件内使用虚拟 DOM 来渲染视图。

当某个状态发生改变时，只通知使用了这个状态的组件。

也就是说，只要组件使用的众多状态中有一个发生了变化，那么整个组件就要重新渲染。很明显会造成很大的性能浪费。因此，对 vnode 进行缓存，并将上一次缓存的 vnode 和当前新创建的 vnode 进行对比，只更新发生变化的节点就变得尤为重要。这也是 vnode 最重要的一个作用。

## VNode 的类型

vnode 的类型有以下几种：
- 注释节点
- 文本节点
- 元素节点
- 组件节点
- 函数式组件
- 克隆节点

## 总结

VNode 是一个类，可以生成不同类型的 vnode 实例，而不同类型的 vnode 表示不同类型的真实 DOM 元素。

由于 Vue.js 对组件采用了阻尼 DOM 来更新视图，当属性发生变化时，整个组件都要进行重新渲染的操作，但组件内并不是所有 DOM 节点都需要更新，所以将 vnode 缓存并将当前新生成的 vnode 和上一次缓存的 oldValue 进行对比，只对需要更新的部分进行 DOM 操作可以提升很多性能。

vnode 有很多类型，它们本质上都是从 VNode 类实例化出的对象，其唯一区别只是属性不同。