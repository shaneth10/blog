# 第三章 Array 的变化侦测

Object 的侦测方式是通过 getter/setter 实现的，但类似 push 方法来改变数组，并不会触发 getter/setter 。

正因为我们可以通过 Array 原型上的方法来改变数组的内容，所以 Object 那种通过 getter/setter 的实现方式就行不通了。

## 如何追踪变化

我们可以用一个拦截器覆盖 Array.prototype。之后，每当使用 Array 原型上的方法操作数组时，其实执行的都是拦截器中提供的方法。然后再拦截器中使用原生 Array 的原型方法去操作数组。

## 拦截器

## 使用拦截器覆盖 Array 原型

## 将拦截器方法挂载到数组的属性上

## 如何收集依赖

## 依赖列表存在哪儿

## 收集依赖

## 在拦截器中获取 Observer 实例

## 向数组的依赖发送通知

## 侦测数组中元素的变化

## 侦测新增元素的变化

## 关于 Array 的问题

## 总结

Array 追踪变化的方式和 Object 不一样。因为它是通过方法来改变内容的，所以我们通过创建拦截器去覆盖数组原型的方式来追踪变化。

为了不污染全局 Array.prototype ，我们在 Observer 中只针对那些需要侦测变化的数组使用 _proto_ 来覆盖原型方法，但 _proto_ 在 ES6 之前并不是标准属性，不是所有浏览器都支持它。因此，针对不支持 _proto_ 属性的浏览器，我们直接循环拦截器，把拦截器中的方法直接设置到数组身上来拦截 Array.prototype 上的原生方法。